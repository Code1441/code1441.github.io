(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){"use strict";n.r(t);n(282),n(283);var r=function(e){return function(t){try{t.style.display=e}catch(e){console.log("Error was occured: ".concat(e))}}},i=r("none"),a=r;function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o,s=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"hide",function(){return i(t.node)}),c(this,"show",function(){return a("block")(t.node)}),c(this,"setBackground",function(e){t.node.style.backgroundImage="url(".concat(e,")")}),this.node=document.getElementById("banner")},u="everything",l="q";function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=(f(o={},"top-headlines","https://newsapi.org/v2/top-headlines"),f(o,u,"https://newsapi.org/v2/everything"),o),v=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.createRequestUrl(t,n)}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(e,[{key:"createRequestUrl",value:function(e,t){var n=this.createQueryString(t);this._url="".concat(d[e],"?").concat(n)}},{key:"createQueryString",value:function(e){var t="apiKey=".concat("fff0c9c8799f4640888f3bf1c197fedc","&language=en");for(var n in e)t="".concat(t,"&").concat(n,"=").concat(e[n]);return t}},{key:"send",value:function(){return fetch(this._url).then(function(e){return e.json()})}}],[{key:"from",value:function(t,n){return new e(t,n)}}]),e}();function g(e,t,n,r,i,a,c){try{var o=e[a](c),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(r,i)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"handleClick",function(e){var n=e.target;n.classList.contains("nav-list-item")&&t.category!==n.textContent&&(t.category=n.textContent,t.showCategory(t.category),t.getNews(t.category))}),y(this,"getNews",function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function c(e){g(a,r,i,c,o,"next",e)}function o(e){g(a,r,i,c,o,"throw",e)}c(void 0)})}}(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.from(u,y({},l,t)).send();case 3:n=e.sent,O(n),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error occured while getting articles ",e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()),y(this,"showCategory",function(e){j(),a("block")(t._categoryTitle),t._categoryTitle.className="category-title ".concat(e,"-theme"),t._categoryTitle.innerHTML=e}),y(this,"handleScroll",function(e){var n=t._node.clientHeight,r=0,i=!1;return function(){i||(window.requestAnimationFrame(function(){!function(){var e=window.scrollY;e>r&&e>n?t._node.classList.add("nav-hidden"):e+window.innerHeight<document.body.clientHeight&&t._node.classList.remove("nav-hidden"),r=e}(),i=!1}),i=!0)}}),this._node=document.getElementById("category-nav"),this._categoryNews=document.getElementById("category-news"),this._categoryTitle=document.getElementById("category-title"),this.category=null,window.addEventListener("scroll",this.handleScroll()),this._categoryNews.addEventListener("click",this.handleClick)}return function(e,t,n){t&&p(e.prototype,t),n&&p(e,n)}(e,[{key:"categoryList",get:function(){return this._categoryNews}}]),e}()),m=function(e){var t=e.title,n=e.url,r=e.description,i=e.content,a=e.publishedAt,c=e.urlToImage;return'<li class="article-item">\n    <div class="article-text">\n      <a class="article-title" href=\''.concat(n,'\' target="_blank">\n        ').concat(t||"",'\n      </a>\n      <p class="article-description">').concat(r||"",'</p>\n      <p class="article-description">').concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.slice(0,e.lastIndexOf("[")):""}(i),'</p>\n      <p class="article-date">').concat(function(e){return e?new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):""}(a),"</p>\n    </div>\n      ").concat(c?'<a class="article-image"  href=\''.concat(n,"'>\n        <img src=").concat(c," onerror=\"this.style.display='none'\"/>\n      </a> "):"","\n  </li>\n")};function b(e,t,n,r,i,a,c){try{var o=e[a](c),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(r,i)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,"handleBtnClick",function(e){var n=e.target;t.activateSearch();var r=t.searchInput.value;n.dataset.active?t.searchQuery!==r&&(t.searchQuery=r,t.getNews(t.searchQuery)):n.dataset.active=!0}),k(this,"activateSearch",function(){!function(e){return function(t){return t.forEach(a(e))}}("block")([t.searchInput,t.searchCloseButton]),i(Q),t.searchWrap.classList.add("search-active")}),k(this,"disactivateSearch",function(){!function(e){e.forEach(i)}([t.searchInput,t.searchCloseButton]),a("flex")(Q),t.searchWrap.classList.remove("search-active"),t.searchButton.dataset.active=!1,t.searchResults.innerHTML=" ",t.searchInput.value=""}),k(this,"getNews",function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function c(e){b(a,r,i,c,o,"next",e)}function o(e){b(a,r,i,c,o,"throw",e)}c(void 0)})}}(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.from(u,k({},l,n)).send();case 3:r=e.sent,t.render(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error occured while getting articles ",e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()),k(this,"hideSearchResults",function(){return i(t.searchResults)}),k(this,"showSearchResults",function(){return a("block")(t.searchResults)}),k(this,"render",function(e){var n=e.articles.reduce(function(e,t){return e+m(t)},"");t.searchResults.innerHTML='<ul class="articles-container">'.concat(n,"</ul>"),t.showSearchResults()}),this.searchWrap=document.getElementById("search-wrap"),this.searchInput=document.getElementById("search-input"),this.searchButton=document.getElementById("search-btn"),this.searchCloseButton=document.getElementById("search-close-btn"),this.searchResults=document.getElementById("search-results"),this.searchQuery=null,this.searchButton.addEventListener("click",this.handleBtnClick),this.searchCloseButton.addEventListener("click",this.disactivateSearch)},x=function(e){return new Promise(function(t){return setTimeout(t,e)})};function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,"_renderInput",function(){var e="notification-input";return"\n      <div class='".concat(e,"-wrapper'>\n        <input type=\"text\" class='").concat(e,"-field'>\n        <button class='").concat(e,"-submit-btn'>\n          ОК\n        </button>\n      </div>\n    ")}),_(this,"_render",function(){var e=n.settings,t=e.message,r=e.showInput;n._node=document.createElement("div"),n._node.classList.add("notification");var i="\n      <p class='".concat("notification","-message'>").concat(t,"</p>\n      ").concat(r?n._renderInput():"","\n    ");n._node.insertAdjacentHTML("afterbegin",i),document.body.insertAdjacentElement("afterbegin",n._node)}),_(this,"show",function(e){return x(e).then(function(){return n._node.classList.add("notification-visible"),n})}),_(this,"hide",function(e){return x(e).then(function(){return n._node.classList.remove("notification-visible"),n})}),this._node=null,this.settings=t,this._render()}return function(e,t,n){t&&B(e.prototype,t),n&&B(e,n)}(e,null,[{key:"create",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}},{key:"showNotificationsChain",value:function(t){t.reduce(function(t,n){return t.then(function(){return e.create(n).show(2e3)}).then(function(e){return e.hide(5e3)})},Promise.resolve())}}]),e}(),L=regeneratorRuntime.mark(T);function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,"Let's get acquainted! What is your name?";case 2:return e=t.sent,t.next=5,"Hi, ".concat(e,"! Nice to meet you!");case 5:return t.next=7,"Explore the website!\n In the navigation above you\n can choose a category you want to read news about";case 7:case"end":return t.stop()}},L,this)}var P=(new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,"start",function(){I.create({message:t.greetingsQuestions.next().value,showInput:!0}).show(5e3).then(t.showNotificationsGuide)}),C(this,"showNotificationsGuide",function(e){document.body.querySelector(".notification-input-submit-btn").addEventListener("click",function(){e.hide(1e3);var n=document.body.querySelector(".notification-input-field").value;I.showNotificationsChain([{message:t.greetingsQuestions.next(n).value},{message:t.greetingsQuestions.next().value}])})}),this.greetingsQuestions=T()}).start;function R(e,t,n,r,i,a,c){try{var o=e[a](c),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(r,i)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),S(this,"getArticles",function(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function c(e){R(a,r,i,c,o,"next",e)}function o(e){R(a,r,i,c,o,"throw",e)}c(void 0)})}}(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.from(u,S({},l,"top-news")).send();case 3:n=e.sent,t.render(n),P(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error occured while getting articles ",e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}))),S(this,"render",function(e){var n=e.articles,r=n.reduce(function(e,t){return e+m(t)},"");H(n[0].urlToImage),t.node.innerHTML="<ul class='top-articles-container'>".concat(r,"</ul>")}),this.node=document.getElementById("top-headlines"),this.getArticles()};n.d(t,"hideBanner",function(){return j}),n.d(t,"setBannerBackground",function(){return H}),n.d(t,"renderTopHeadlines",function(){return O}),n.d(t,"CategoryList",function(){return Q});var j=s.hide,H=s.setBackground,O=N.render,Q=w.categoryList;t.default={Banner:s,Navigation:w,Search:E,TopHeadlines:N,GreetingService:P}}}]);